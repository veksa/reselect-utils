(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(module,exports,__webpack_require__){"use strict";var __read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSelectorName=function(selector){return"selectorName"in selector&&selector.selectorName?selector.selectorName:selector.name},exports.isCachedSelectorSelector=function(selector){return selector instanceof Object&&"keySelector"in selector},exports.tryExtractCachedSelector=function(selector){if(exports.isCachedSelectorSelector(selector))return selector;if(selector.dependencies&&1===selector.dependencies.length){var dependency=__read(selector.dependencies,1)[0];return exports.tryExtractCachedSelector(dependency)}},exports.defineDynamicSelectorName=function(selector,selectorNameGetter){var overriddenSelectorName;Object.defineProperty(selector,"selectorName",{configurable:!0,get:function(){return null!=overriddenSelectorName?overriddenSelectorName:selectorNameGetter()},set:function(value){overriddenSelectorName=value}})};var debugMode=!0;exports.isDebugMode=function(){return debugMode},exports.setDebugMode=function(value){debugMode=value}},142:function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result};Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__importStar(__webpack_require__(41)),reselect_tools_1=__webpack_require__(672),cytoscapeUtils_1=__webpack_require__(673);exports.SelectorGraph=function(_a){var selectors=_a.selectors,onNodeClick=_a.onNodeClick,style=_a.style,_b=__read(react_1.useState({}),2),nodes=_b[0],setNodes=_b[1],_c=__read(react_1.useState([]),2),edges=_c[0],setEdges=_c[1],cy=react_1.useRef(),cyElement=react_1.useRef(null);return react_1.useEffect((function(){reselect_tools_1.reset(),reselect_tools_1.registerSelectors(selectors);var graph=reselect_tools_1.selectorGraph();setNodes(graph.nodes),setEdges(graph.edges)}),[selectors,setNodes,setEdges]),react_1.useEffect((function(){cy.current||(cy.current=cytoscapeUtils_1.drawCytoscapeGraph(cyElement.current)),cytoscapeUtils_1.updateCytoscapeGraph(cy.current,nodes,edges)}),[cy,cyElement,nodes,edges]),react_1.useEffect((function(){cy.current&&(cy.current.off("click","node"),cy.current.on("click","node",(function(event){var name=event.target.data().name;onNodeClick(name,reselect_tools_1.checkSelector(name))})))}),[cy,onNodeClick]),react_1.useEffect((function(){return function(){cy.current&&cy.current.destroy()}}),[cy]),react_1.default.createElement("div",{style:__assign({height:"100%"},style),ref:cyElement,title:"Double Click to Reset",onDoubleClick:function(){return cy.current&&cytoscapeUtils_1.updateCytoscapeGraph(cy.current,nodes,edges)}})}},355:function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var reselect_1=__webpack_require__(71);exports.createStructuredSelector=function createStructuredSelector(selectors,selectorCreator){void 0===selectorCreator&&(selectorCreator=reselect_1.createSelector);var objectKeys=Object.keys(selectors);return selectorCreator(objectKeys.map((function(key){return selectors[key]})),(function(){for(var values=[],_i=0;_i<arguments.length;_i++)values[_i]=arguments[_i];return values.reduce((function(composition,value,index){var _a;return __assign(__assign({},composition),((_a={})[objectKeys[index]]=value,_a))}),{})}))}},356:function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var helpers_1=__webpack_require__(108),innerCreateBoundSelector=function(baseSelector,binding){return function(state,props){return baseSelector(state,__assign(__assign({},props||{}),binding||{}))}};exports.createBoundSelector=function(baseSelector,binding){var boundSelector=innerCreateBoundSelector(baseSelector,binding);if(boundSelector.dependencies=[baseSelector],helpers_1.isDebugMode()&&helpers_1.defineDynamicSelectorName(boundSelector,(function(){return helpers_1.getSelectorName(baseSelector)+" ("+function(binding){var structure=Object.keys(binding).reduce((function(result,key){var _a;return __assign(__assign({},result),((_a={})[key]="[*]",_a))}),{});return Object.keys(structure).join()+" -> "+Object.values(structure).join()}(binding)+")"})),helpers_1.isCachedSelectorSelector(baseSelector)){var decoratedBaseSelector=Object.assign((function(state,props){return baseSelector(state,props)}),baseSelector);baseSelector.getMatchingSelector&&(decoratedBaseSelector.getMatchingSelector=innerCreateBoundSelector(baseSelector.getMatchingSelector,binding)),baseSelector.removeMatchingSelector&&(decoratedBaseSelector.removeMatchingSelector=innerCreateBoundSelector(baseSelector.removeMatchingSelector,binding)),decoratedBaseSelector.keySelector=innerCreateBoundSelector(baseSelector.keySelector,binding),boundSelector.dependencies=[decoratedBaseSelector]}return boundSelector}},357:function(module,exports,__webpack_require__){__webpack_require__(358),__webpack_require__(504),module.exports=__webpack_require__(505)},422:function(module,exports){},505:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(83);module._StorybookPreserveDecorators=!0,Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)([__webpack_require__(656)],module)}.call(this,__webpack_require__(506)(module))},656:function(module,exports,__webpack_require__){var map={"./reselect-utils/src/__stories__/createAdaptedSelector.story.tsx":657,"./reselect-utils/src/__stories__/createBoundSelector.story.tsx":792,"./reselect-utils/src/__stories__/createChainSelector.story.tsx":793,"./reselect-utils/src/__stories__/createPathSelector.story.tsx":801};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=656},657:function(module,exports,__webpack_require__){"use strict";(function(module){var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result};Object.defineProperty(exports,"__esModule",{value:!0});var withSourceLoader=__webpack_require__(62).withSource,__STORY__=(__webpack_require__(62).addSource,"import React, { useMemo } from 'react';\nimport { storiesOf } from '@storybook/react';\nimport { action } from '@storybook/addon-actions';\nimport { SelectorGraph } from './SelectorGraph';\nimport { State } from '../__data__/state';\nimport { createAdaptedSelector } from '../createAdaptedSelector';\nimport { createStructuredSelector } from '../createStructuredSelector';\n\nstoriesOf('createAdaptedSelector', module).add('example', () => {\n  const selectors = useMemo(() => {\n    /* SELECTORS DEFINITION START */\n    const personSelector = (state: State, props: { id: number }) =>\n      state.persons[props.id];\n    const messageSelector = (state: State, props: { id: number }) =>\n      state.messages[props.id];\n\n    const personAndMessageSelector = createStructuredSelector({\n      person: createAdaptedSelector(\n        personSelector,\n        (props: { personId: number }) => ({\n          id: props.personId,\n        }),\n      ),\n      message: createAdaptedSelector(\n        messageSelector,\n        (props: { messageId: number }) => ({\n          id: props.messageId,\n        }),\n      ),\n    });\n    /* SELECTORS DEFINITION END */\n\n    return {\n      personSelector,\n      messageSelector,\n      personAndMessageSelector,\n    };\n  }, []);\n\n  return (\n    <SelectorGraph\n      selectors={selectors}\n      onNodeClick={(name, node) => action(name)(node)}\n    />\n  );\n});\n"),__ADDS_MAP__={"createadaptedselector--example":{startLoc:{col:47,line:9},endLoc:{col:1,line:46},startBody:{col:58,line:9},endBody:{col:1,line:46}}},react_1=__importStar(__webpack_require__(41)),react_2=__webpack_require__(83),addon_actions_1=__webpack_require__(107),SelectorGraph_1=__webpack_require__(142),createAdaptedSelector_1=__webpack_require__(791),createStructuredSelector_1=__webpack_require__(355);react_2.storiesOf("createAdaptedSelector",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/createAdaptedSelector.story.tsx",[],{},"/home/sergey/IdeaProjects/reselect-utils/packages/reselect-utils/src/__stories__",{})).add("example",(function(){var selectors=react_1.useMemo((function(){var personSelector=function(state,props){return state.persons[props.id]},messageSelector=function(state,props){return state.messages[props.id]};return{personSelector:personSelector,messageSelector:messageSelector,personAndMessageSelector:createStructuredSelector_1.createStructuredSelector({person:createAdaptedSelector_1.createAdaptedSelector(personSelector,(function(props){return{id:props.personId}})),message:createAdaptedSelector_1.createAdaptedSelector(messageSelector,(function(props){return{id:props.messageId}}))})}}),[]);return react_1.default.createElement(SelectorGraph_1.SelectorGraph,{selectors:selectors,onNodeClick:function(name,node){return addon_actions_1.action(name)(node)}})}))}).call(this,__webpack_require__(46)(module))},673:function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=this&&this.__spread||function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var cytoscape_1=__importDefault(__webpack_require__(674));cytoscape_1.default.use(__webpack_require__(678));var dagreLayout={name:"dagre",rankDir:"BT",ranker:"longest-path",nodeDimensionsIncludeLabels:!0},cytoDefaults={style:[{selector:"node",style:{"background-color":"#666",label:"data(id)"}},{selector:"edge",style:{width:3,"line-color":"#ccc","target-arrow-color":"#ccc","target-arrow-shape":"triangle"}}],layout:dagreLayout};exports.createCytoElements=function(nodes,edges){var cytoNodes=Object.entries(nodes).map((function(_a){var _b=__read(_a,2),name=_b[0],node=_b[1];return{data:__assign({id:name},node)}})),cytoEdges=edges.map((function(edge,index){return{data:{id:""+index,source:edge.from,target:edge.to}}}));return __spread(cytoNodes,cytoEdges)},exports.drawCytoscapeGraph=function(cyElement){return cytoscape_1.default(__assign(__assign({},cytoDefaults),{container:cyElement}))},exports.updateCytoscapeGraph=function(cy,nodes,edges){var elements=exports.createCytoElements(nodes,edges);cy.json({elements:elements}),cy.layout(dagreLayout).run()}},791:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var helpers_1=__webpack_require__(108),innerCreateAdaptedSelector=function(baseSelector,mapping){return function(state,props){return baseSelector(state,mapping(props))}};exports.createAdaptedSelector=function(baseSelector,mapping){var adaptedSelector=innerCreateAdaptedSelector(baseSelector,mapping);if(adaptedSelector.dependencies=[baseSelector],helpers_1.isDebugMode()&&helpers_1.defineDynamicSelectorName(adaptedSelector,(function(){return helpers_1.getSelectorName(baseSelector)+" ("+function(mapping){if(mapping.name)return mapping.name;var structure=mapping(new Proxy({},{get:function(target,key){return key}}));return Object.keys(structure).join()+" -> "+Object.values(structure).join()}(mapping)+")"})),helpers_1.isCachedSelectorSelector(baseSelector)){var decoratedBaseSelector=Object.assign((function(state,props){return baseSelector(state,props)}),baseSelector);baseSelector.getMatchingSelector&&(decoratedBaseSelector.getMatchingSelector=innerCreateAdaptedSelector(baseSelector.getMatchingSelector,mapping)),baseSelector.removeMatchingSelector&&(decoratedBaseSelector.removeMatchingSelector=innerCreateAdaptedSelector(baseSelector.removeMatchingSelector,mapping)),decoratedBaseSelector.keySelector=innerCreateAdaptedSelector(baseSelector.keySelector,mapping),adaptedSelector.dependencies=[decoratedBaseSelector]}return adaptedSelector}},792:function(module,exports,__webpack_require__){"use strict";(function(module){var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result};Object.defineProperty(exports,"__esModule",{value:!0});var withSourceLoader=__webpack_require__(62).withSource,__STORY__=(__webpack_require__(62).addSource,"import React, { useMemo } from 'react';\nimport { storiesOf } from '@storybook/react';\nimport { action } from '@storybook/addon-actions';\nimport { SelectorGraph } from './SelectorGraph';\nimport { State } from '../__data__/state';\nimport { createBoundSelector } from '../createBoundSelector';\nimport { createStructuredSelector } from '../createStructuredSelector';\n\nstoriesOf('createBoundSelector', module).add('example', () => {\n  const selectors = useMemo(() => {\n    /* SELECTORS DEFINITION START */\n    const personSelector = (state: State, props: { id: number }) =>\n      state.persons[props.id];\n    const messageSelector = (state: State, props: { id: number }) =>\n      state.messages[props.id];\n\n    const marryAndHelloSelector = createStructuredSelector({\n      person: createBoundSelector(personSelector, { id: 1 }),\n      message: createBoundSelector(messageSelector, { id: 100 }),\n    });\n    /* SELECTORS DEFINITION END */\n\n    return {\n      personSelector,\n      messageSelector,\n      marryAndHelloSelector,\n    };\n  }, []);\n\n  return (\n    <SelectorGraph\n      selectors={selectors}\n      onNodeClick={(name, node) => action(name)(node)}\n    />\n  );\n});\n"),__ADDS_MAP__={"createboundselector--example":{startLoc:{col:45,line:9},endLoc:{col:1,line:36},startBody:{col:56,line:9},endBody:{col:1,line:36}}},react_1=__importStar(__webpack_require__(41)),react_2=__webpack_require__(83),addon_actions_1=__webpack_require__(107),SelectorGraph_1=__webpack_require__(142),createBoundSelector_1=__webpack_require__(356),createStructuredSelector_1=__webpack_require__(355);react_2.storiesOf("createBoundSelector",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/createBoundSelector.story.tsx",[],{},"/home/sergey/IdeaProjects/reselect-utils/packages/reselect-utils/src/__stories__",{})).add("example",(function(){var selectors=react_1.useMemo((function(){var personSelector=function(state,props){return state.persons[props.id]},messageSelector=function(state,props){return state.messages[props.id]};return{personSelector:personSelector,messageSelector:messageSelector,marryAndHelloSelector:createStructuredSelector_1.createStructuredSelector({person:createBoundSelector_1.createBoundSelector(personSelector,{id:1}),message:createBoundSelector_1.createBoundSelector(messageSelector,{id:100})})}}),[]);return react_1.default.createElement(SelectorGraph_1.SelectorGraph,{selectors:selectors,onNodeClick:function(name,node){return addon_actions_1.action(name)(node)}})}))}).call(this,__webpack_require__(46)(module))},793:function(module,exports,__webpack_require__){"use strict";(function(module){var __read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result};Object.defineProperty(exports,"__esModule",{value:!0});var withSourceLoader=__webpack_require__(62).withSource,__STORY__=(__webpack_require__(62).addSource,"import React, { useMemo, useState } from 'react';\nimport { storiesOf } from '@storybook/react';\nimport { action } from '@storybook/addon-actions';\nimport { createSelector, Selector } from 'reselect';\nimport { Message, Person, commonState, State } from '../__data__/state';\nimport { createBoundSelector } from '../createBoundSelector';\nimport { createSequenceSelector } from '../createSequenceSelector';\nimport { createChainSelector } from '../createChainSelector';\nimport { ChainSelectorGraph } from './ChainSelectorGraph';\n\nstoriesOf('createChainSelector', module)\n  .add('entity chain example', () => {\n    const [called, setCalled] = useState(false);\n\n    const selectors = useMemo(() => {\n      /* SELECTORS DEFINITION START */\n      const personSelector = (state: State, props: { id: number }) =>\n        state.persons[props.id];\n      const messageSelector = (state: State, props: { id: number }) =>\n        state.messages[props.id];\n      const documentSelector = (state: State, props: { id: number }) =>\n        state.documents[props.id];\n\n      const fullNameSelector = createSelector(\n        [personSelector],\n        ({ firstName, secondName }) => `${firstName} ${secondName}`,\n      );\n\n      const personByDocumentIdSelector = createChainSelector(documentSelector)\n        .chain(document =>\n          createBoundSelector(messageSelector, { id: document.messageId }),\n        )\n        .chain(message =>\n          createBoundSelector(fullNameSelector, { id: message.personId }),\n        )\n        .build();\n      /* SELECTORS DEFINITION END */\n\n      if (called) {\n        const personByDocumentId = personByDocumentIdSelector(commonState, {\n          id: 111,\n        });\n\n        action('personByDocumentId')(personByDocumentId);\n      }\n\n      return {\n        personSelector,\n        messageSelector,\n        documentSelector,\n        fullNameSelector,\n        personByDocumentIdSelector,\n      };\n    }, [called]);\n\n    return (\n      <ChainSelectorGraph\n        selectors={selectors}\n        onCallButtonClick={() => setCalled(true)}\n      />\n    );\n  })\n  .add('aggregation example', () => {\n    const [called, setCalled] = useState(false);\n\n    const selectors = useMemo(() => {\n      /* SELECTORS DEFINITION START */\n      const personsSelector = (state: State) => state.persons;\n\n      const personSelector = (state: State, props: { id: number }) =>\n        state.persons[props.id];\n\n      const fullNameSelector = createSelector(\n        [personSelector],\n        ({ firstName, secondName }) => `${firstName} ${secondName}`,\n      );\n\n      const longestFullNameSelector = createChainSelector(personsSelector)\n        .chain(persons =>\n          createSequenceSelector(\n            Object.values(persons).map(person =>\n              createBoundSelector(fullNameSelector, { id: person.id }),\n            ),\n          ),\n        )\n        .map(fullNames =>\n          fullNames.reduce((longest, current) =>\n            current.length > longest.length ? current : longest,\n          ),\n        )\n        .build();\n      /* SELECTORS DEFINITION END */\n\n      if (called) {\n        const longestFullName = longestFullNameSelector(commonState);\n\n        action('longestFullName')(longestFullName);\n      }\n\n      return {\n        personSelector,\n        personsSelector,\n        fullNameSelector,\n        longestFullNameSelector,\n      };\n    }, [called]);\n\n    return (\n      <ChainSelectorGraph\n        selectors={selectors}\n        onCallButtonClick={() => setCalled(true)}\n      />\n    );\n  })\n  .add('switch dependency example', () => {\n    const [documentId, setDocumentId] = useState<number>();\n\n    const selectors = useMemo(() => {\n      /* SELECTORS DEFINITION START */\n      const personSelector = (state: State, props: { id: number }) =>\n        state.persons[props.id];\n      const messageSelector = (state: State, props: { id: number }) =>\n        state.messages[props.id];\n      const documentSelector = (state: State, props: { id: number }) =>\n        state.documents[props.id];\n\n      const personOrMessageByDocumentIdSelector = createChainSelector(\n        documentSelector,\n      )\n        .chain(\n          document =>\n            (document.messageId === 100\n              ? createBoundSelector(personSelector, { id: 1 })\n              : createBoundSelector(messageSelector, {\n                  id: document.messageId,\n                })) as Selector<State, Person | Message>,\n        )\n        .build();\n      /* SELECTORS DEFINITION END */\n\n      if (documentId !== undefined) {\n        const personOrMessageByDocumentId = personOrMessageByDocumentIdSelector(\n          commonState,\n          {\n            id: documentId,\n          },\n        );\n\n        action('personOrMessageByDocumentId')(personOrMessageByDocumentId);\n      }\n\n      return {\n        personSelector,\n        messageSelector,\n        documentSelector,\n        personOrMessageByDocumentIdSelector,\n      };\n    }, [documentId]);\n\n    return (\n      <ChainSelectorGraph\n        selectors={selectors}\n        onCallButtonClick={() => setDocumentId(documentId === 111 ? 222 : 111)}\n      />\n    );\n  });\n"),__ADDS_MAP__={"createchainselector--switch-dependency-example":{startLoc:{col:7,line:115},endLoc:{col:3,line:166},startBody:{col:36,line:115},endBody:{col:3,line:166}},"createchainselector--aggregation-example":{startLoc:{col:7,line:63},endLoc:{col:3,line:114},startBody:{col:30,line:63},endBody:{col:3,line:114}},"createchainselector--entity-chain-example":{startLoc:{col:7,line:12},endLoc:{col:3,line:62},startBody:{col:31,line:12},endBody:{col:3,line:62}}},react_1=__importStar(__webpack_require__(41)),react_2=__webpack_require__(83),addon_actions_1=__webpack_require__(107),reselect_1=__webpack_require__(71),state_1=__webpack_require__(794),createBoundSelector_1=__webpack_require__(356),createSequenceSelector_1=__webpack_require__(795),createChainSelector_1=__webpack_require__(796),ChainSelectorGraph_1=__webpack_require__(800);react_2.storiesOf("createChainSelector",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/createChainSelector.story.tsx",[],{},"/home/sergey/IdeaProjects/reselect-utils/packages/reselect-utils/src/__stories__",{})).add("entity chain example",(function(){var _a=__read(react_1.useState(!1),2),called=_a[0],setCalled=_a[1],selectors=react_1.useMemo((function(){var personSelector=function(state,props){return state.persons[props.id]},messageSelector=function(state,props){return state.messages[props.id]},documentSelector=function(state,props){return state.documents[props.id]},fullNameSelector=reselect_1.createSelector([personSelector],(function(_a){return _a.firstName+" "+_a.secondName})),personByDocumentIdSelector=createChainSelector_1.createChainSelector(documentSelector).chain((function(document){return createBoundSelector_1.createBoundSelector(messageSelector,{id:document.messageId})})).chain((function(message){return createBoundSelector_1.createBoundSelector(fullNameSelector,{id:message.personId})})).build();if(called){var personByDocumentId=personByDocumentIdSelector(state_1.commonState,{id:111});addon_actions_1.action("personByDocumentId")(personByDocumentId)}return{personSelector:personSelector,messageSelector:messageSelector,documentSelector:documentSelector,fullNameSelector:fullNameSelector,personByDocumentIdSelector:personByDocumentIdSelector}}),[called]);return react_1.default.createElement(ChainSelectorGraph_1.ChainSelectorGraph,{selectors:selectors,onCallButtonClick:function(){return setCalled(!0)}})})).add("aggregation example",(function(){var _a=__read(react_1.useState(!1),2),called=_a[0],setCalled=_a[1],selectors=react_1.useMemo((function(){var personsSelector=function(state){return state.persons},personSelector=function(state,props){return state.persons[props.id]},fullNameSelector=reselect_1.createSelector([personSelector],(function(_a){return _a.firstName+" "+_a.secondName})),longestFullNameSelector=createChainSelector_1.createChainSelector(personsSelector).chain((function(persons){return createSequenceSelector_1.createSequenceSelector(Object.values(persons).map((function(person){return createBoundSelector_1.createBoundSelector(fullNameSelector,{id:person.id})})))})).map((function(fullNames){return fullNames.reduce((function(longest,current){return current.length>longest.length?current:longest}))})).build();if(called){var longestFullName=longestFullNameSelector(state_1.commonState);addon_actions_1.action("longestFullName")(longestFullName)}return{personSelector:personSelector,personsSelector:personsSelector,fullNameSelector:fullNameSelector,longestFullNameSelector:longestFullNameSelector}}),[called]);return react_1.default.createElement(ChainSelectorGraph_1.ChainSelectorGraph,{selectors:selectors,onCallButtonClick:function(){return setCalled(!0)}})})).add("switch dependency example",(function(){var _a=__read(react_1.useState(),2),documentId=_a[0],setDocumentId=_a[1],selectors=react_1.useMemo((function(){var personSelector=function(state,props){return state.persons[props.id]},messageSelector=function(state,props){return state.messages[props.id]},documentSelector=function(state,props){return state.documents[props.id]},personOrMessageByDocumentIdSelector=createChainSelector_1.createChainSelector(documentSelector).chain((function(document){return 100===document.messageId?createBoundSelector_1.createBoundSelector(personSelector,{id:1}):createBoundSelector_1.createBoundSelector(messageSelector,{id:document.messageId})})).build();if(void 0!==documentId){var personOrMessageByDocumentId=personOrMessageByDocumentIdSelector(state_1.commonState,{id:documentId});addon_actions_1.action("personOrMessageByDocumentId")(personOrMessageByDocumentId)}return{personSelector:personSelector,messageSelector:messageSelector,documentSelector:documentSelector,personOrMessageByDocumentIdSelector:personOrMessageByDocumentIdSelector}}),[documentId]);return react_1.default.createElement(ChainSelectorGraph_1.ChainSelectorGraph,{selectors:selectors,onCallButtonClick:function(){return setDocumentId(111===documentId?222:111)}})}))}).call(this,__webpack_require__(46)(module))},794:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.commonState={persons:{1:{id:1,firstName:"Marry",secondName:"Poppins"},2:{id:2,firstName:"Harry",secondName:"Potter"}},messages:{100:{id:100,personId:1,date:new Date("2018-12-29"),text:"Hello"},200:{id:200,personId:2,date:new Date("2018-12-30"),text:"Buy"}},documents:{111:{id:111,messageId:100,data:[1,2,3]},222:{id:222,messageId:200,data:[4,5,6]}}}},795:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var reselect_1=__webpack_require__(71);exports.createSequenceSelector=function createSequenceSelector(selectors,selectorCreator){return void 0===selectorCreator&&(selectorCreator=reselect_1.createSelector),selectorCreator(selectors,(function(){for(var results=[],_i=0;_i<arguments.length;_i++)results[_i]=arguments[_i];return results}))}},796:function(module,exports,__webpack_require__){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result};Object.defineProperty(exports,"__esModule",{value:!0});var reselect_1=__webpack_require__(71),re_reselect_1=__importStar(__webpack_require__(797)),helpers_1=__webpack_require__(108),composingKeySelectorCreator_1=__webpack_require__(798),sumString=function(stringSource){return Array.from(stringSource.toString()).reduce((function(sum,char){return char.charCodeAt(0)+sum}),0)},cloneCacheObject=function(cacheObject){if(cacheObject instanceof re_reselect_1.FifoMapCache||cacheObject instanceof re_reselect_1.FifoObjectCache||cacheObject instanceof re_reselect_1.FlatMapCache||cacheObject instanceof re_reselect_1.FlatObjectCache||cacheObject instanceof re_reselect_1.LruMapCache||cacheObject instanceof re_reselect_1.LruObjectCache){var cacheSize=cacheObject._cacheSize;return new(0,cacheObject.constructor)({cacheSize:cacheSize})}},SelectorMonad=function(){function SelectorMonad(selector,prevChain){this.selector=selector,this.prevChain=prevChain}return SelectorMonad.prototype.chain=function(fn){var _this=this,cachedSelector=helpers_1.tryExtractCachedSelector(this.selector),higherOrderSelector=(cachedSelector?re_reselect_1.default:reselect_1.createSelector)(this.selector,fn);cachedSelector&&(higherOrderSelector=higherOrderSelector({keySelector:cachedSelector.keySelector,cacheObject:cloneCacheObject(cachedSelector.cache)})),helpers_1.isDebugMode()&&helpers_1.defineDynamicSelectorName(higherOrderSelector,(function(){return helpers_1.getSelectorName(_this.selector)+" (pre-chained "+sumString(fn)+")"}));var combinedSelector=function(state,props){var derivedSelector=higherOrderSelector(state,props);return combinedSelector.dependencies=[higherOrderSelector,derivedSelector],combinedSelector.currentKeySelector=composingKeySelectorCreator_1.composingKeySelectorCreator({inputSelectors:combinedSelector.dependencies}),helpers_1.isDebugMode()&&(helpers_1.getSelectorName(derivedSelector)||helpers_1.defineDynamicSelectorName(derivedSelector,(function(){var selector;return"derived from "+helpers_1.getSelectorName(_this.selector)+" ("+((selector=derivedSelector).dependencies||[]).reduce((function(base,dependency){return base+sumString(dependency)}),sumString(selector))+")"})),helpers_1.defineDynamicSelectorName(combinedSelector,(function(){return helpers_1.getSelectorName(_this.selector)+" (chained by "+helpers_1.getSelectorName(derivedSelector)+")"}))),derivedSelector(state,props)};return combinedSelector.dependencies=[higherOrderSelector],combinedSelector.currentKeySelector=function(){return"<DefaultKey>"},cachedSelector&&(combinedSelector.cache=higherOrderSelector.cache,combinedSelector.currentKeySelector=cachedSelector.keySelector),combinedSelector.keySelector=function(state,props){return combinedSelector.currentKeySelector(state,props)},helpers_1.isDebugMode()&&helpers_1.defineDynamicSelectorName(combinedSelector,(function(){return helpers_1.getSelectorName(_this.selector)+" (will be chained "+sumString(fn)+")"})),new SelectorMonad(combinedSelector,Object.assign(fn,{parentChain:this.prevChain}))},SelectorMonad.prototype.map=function(fn){var _this=this;return this.chain((function(result){var output=fn(result),selector=function(){return output};return helpers_1.isDebugMode()&&helpers_1.defineDynamicSelectorName(selector,(function(){return helpers_1.getSelectorName(_this.selector)+" (mapped "+sumString(fn)+")"})),selector}))},SelectorMonad.prototype.build=function(){return Object.assign(this.selector,{chainHierarchy:this.prevChain})},SelectorMonad}();exports.SelectorMonad=SelectorMonad,exports.createChainSelector=function createChainSelector(selector){return new SelectorMonad(selector)}},798:function(module,exports,__webpack_require__){"use strict";var __read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=this&&this.__spread||function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar};Object.defineProperty(exports,"__esModule",{value:!0});var helpers_1=__webpack_require__(108),composeKeySelectors_1=__webpack_require__(799);exports.composingKeySelectorCreator=function composingKeySelectorCreator(_a){var inputSelectors=_a.inputSelectors,keySelector=_a.keySelector,keySelectorSet=new Set;keySelector&&keySelectorSet.add(keySelector),inputSelectors.forEach((function(selector){var cachedSelector=helpers_1.tryExtractCachedSelector(selector);cachedSelector&&keySelectorSet.add(cachedSelector.keySelector)}));var keySelectors=__spread(keySelectorSet);return 0===keySelectors.length?function(){return"<DefaultKey>"}:1===keySelectors.length?__read(keySelectors,1)[0]:composeKeySelectors_1.composeKeySelectors.apply(void 0,__spread(keySelectors))}},799:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.composeKeySelectors=function composeKeySelectors(){for(var keySelectors=[],_i=0;_i<arguments.length;_i++)keySelectors[_i]=arguments[_i];return function(state,props){for(var key=keySelectors[0](state,props),i=1;i<keySelectors.length;i+=1)key+=":",key+=keySelectors[i](state,props);return key}}},800:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__importDefault(__webpack_require__(41)),addon_actions_1=__webpack_require__(107),SelectorGraph_1=__webpack_require__(142);exports.ChainSelectorGraph=function(_a){var selectors=_a.selectors,onCallButtonClick=_a.onCallButtonClick;return react_1.default.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column"}},react_1.default.createElement("div",null,react_1.default.createElement("button",{type:"button",onClick:onCallButtonClick},"Call Chain Selector")),react_1.default.createElement(SelectorGraph_1.SelectorGraph,{selectors:selectors,onNodeClick:function(name,node){return addon_actions_1.action(name)(node)},style:{height:void 0,flexGrow:1}}))}},801:function(module,exports,__webpack_require__){"use strict";(function(module){var __read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result};Object.defineProperty(exports,"__esModule",{value:!0});var withSourceLoader=__webpack_require__(62).withSource,__STORY__=(__webpack_require__(62).addSource,"import React, { useMemo } from 'react';\nimport { storiesOf } from '@storybook/react';\nimport { action } from '@storybook/addon-actions';\nimport { createSelector } from 'reselect';\nimport { SelectorGraph } from './SelectorGraph';\nimport { State } from '../__data__/state';\nimport { createPathSelector } from '../createPathSelector';\n\nstoriesOf('createPathSelector', module).add('example', () => {\n  const selectors = useMemo(() => {\n    /* SELECTORS DEFINITION START */\n    const personSelector = (state: State, props: { personId: number }) =>\n      state.persons[props.personId];\n\n    const personFullNameSelector = createSelector(\n      createPathSelector(personSelector).firstName(''),\n      createPathSelector(personSelector).secondName(''),\n      (firstName, secondName) => `${firstName} ${secondName}`,\n    );\n\n    const personShortNameSelector = createSelector(\n      createPathSelector(personSelector).firstName(''),\n      createPathSelector(personSelector).secondName(''),\n      (firstName, secondName) => {\n        const [firstLetter] = Array.from(secondName);\n        return `${firstName} ${firstLetter}.`;\n      },\n    );\n    /* SELECTORS DEFINITION END */\n\n    return {\n      personSelector,\n      personFullNameSelector,\n      personShortNameSelector,\n    };\n  }, []);\n\n  return (\n    <SelectorGraph\n      selectors={selectors}\n      onNodeClick={(name, node) => action(name)(node)}\n    />\n  );\n});\n"),__ADDS_MAP__={"createpathselector--example":{startLoc:{col:44,line:9},endLoc:{col:1,line:44},startBody:{col:55,line:9},endBody:{col:1,line:44}}},react_1=__importStar(__webpack_require__(41)),react_2=__webpack_require__(83),addon_actions_1=__webpack_require__(107),reselect_1=__webpack_require__(71),SelectorGraph_1=__webpack_require__(142),createPathSelector_1=__webpack_require__(802);react_2.storiesOf("createPathSelector",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/createPathSelector.story.tsx",[],{},"/home/sergey/IdeaProjects/reselect-utils/packages/reselect-utils/src/__stories__",{})).add("example",(function(){var selectors=react_1.useMemo((function(){var personSelector=function(state,props){return state.persons[props.personId]};return{personSelector:personSelector,personFullNameSelector:reselect_1.createSelector(createPathSelector_1.createPathSelector(personSelector).firstName(""),createPathSelector_1.createPathSelector(personSelector).secondName(""),(function(firstName,secondName){return firstName+" "+secondName})),personShortNameSelector:reselect_1.createSelector(createPathSelector_1.createPathSelector(personSelector).firstName(""),createPathSelector_1.createPathSelector(personSelector).secondName(""),(function(firstName,secondName){return firstName+" "+__read(Array.from(secondName),1)[0]+"."}))}}),[]);return react_1.default.createElement(SelectorGraph_1.SelectorGraph,{selectors:selectors,onNodeClick:function(name,node){return addon_actions_1.action(name)(node)}})}))}).call(this,__webpack_require__(46)(module))},802:function(module,exports,__webpack_require__){"use strict";var __read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=this&&this.__spread||function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar};Object.defineProperty(exports,"__esModule",{value:!0});var helpers_1=__webpack_require__(108),isObject=function(value){return null!==value&&"object"==typeof value},isNullOrUndefined=function(value){return null==value},innerCreatePathSelector=function(baseSelector,path){void 0===path&&(path=[]);return new Proxy((function(defaultValue){function resultSelector(){for(var result=baseSelector.apply(null,arguments),i=0;i<path.length&&isObject(result);i+=1)result=result[path[i]];return isNullOrUndefined(result)?defaultValue:result}return resultSelector.dependencies=[baseSelector],helpers_1.isDebugMode()&&helpers_1.defineDynamicSelectorName(resultSelector,(function(){var baseName=helpers_1.getSelectorName(baseSelector);return __spread([baseName],path).join(".")})),resultSelector}),{get:function(target,key){return innerCreatePathSelector(baseSelector,__spread(path,[key]))}})};exports.createPathSelector=function createPathSelector(baseSelector){return innerCreatePathSelector(baseSelector)}}},[[357,1,2]]]);
//# sourceMappingURL=main.c586c45c1253077458e7.bundle.js.map